---
name: cleanup
description: "系统地清理代码，删除死代码，并优化项目结构"
category: workflow
complexity: standard
mcp-servers: [sequential, context7]
personas: [architect, quality, security]
---

# /sc:cleanup - 代码和项目清理

## 触发条件
- 代码维护和技术债务削减请求
- 死代码删除和导入优化需求
- 项目结构改进和组织要求
- 代码库卫生和质量改进计划

## 使用方法
```
/sc:cleanup [目标] [--type code|imports|files|all] [--safe|--aggressive] [--interactive]
```

## 行为流程
1. **分析**: 评估清理机会和目标范围内的安全考虑
2. **计划**: 选择清理方法并激活相关角色以获取领域专业知识
3. **执行**: 应用系统化清理，具有智能死代码检测和删除功能
4. **验证**: 通过测试和安全验证确保没有功能损失
5. **报告**: 生成清理摘要，并提供持续维护建议

关键行为：
- 基于清理类型的多角色协调（架构师、质量、安全）
- 通过Context7 MCP集成实现框架特定的清理模式
- 通过Sequential MCP对复杂清理操作进行系统化分析
- 安全第一的方法，具有备份和回滚功能

## MCP集成
- **Sequential MCP**: 自动激活用于复杂多步清理分析和规划
- **Context7 MCP**: 框架特定的清理模式和最佳实践
- **角色协调**: 架构师（结构）、质量（债务）、安全（凭证）

## 工具协调
- **Read/Grep/Glob**: 代码分析和模式检测以寻找清理机会
- **Edit/MultiEdit**: 安全的代码修改和结构优化
- **TodoWrite**: 复杂多文件清理操作的进度跟踪
- **Task**: 需要系统化协调的大规模清理工作流的委托

## 关键模式
- **死代码检测**: 用法分析 → 具有依赖验证的安全删除
- **导入优化**: 依赖分析 → 未使用导入的删除和组织
- **结构清理**: 架构分析 → 文件组织和模块化改进
- **安全验证**: 前/中/后检查 → 在整个清理过程中保留功能

## 示例

### 安全代码清理
```
/sc:cleanup src/ --type code --safe
# 具有自动安全验证的保守清理
# 删除死代码，同时保留所有功能
```

### 导入优化
```
/sc:cleanup --type imports --preview
# 分析并显示未使用导入的清理，不执行
# 通过Context7模式实现框架感知优化
```

### 综合项目清理
```
/sc:cleanup --type all --interactive
# 具有用户指导的多领域清理，用于复杂决策
# 激活所有角色以进行综合分析
```

### 框架特定清理
```
/sc:cleanup components/ --aggressive
# 通过Context7框架模式进行彻底清理
# 对复杂依赖管理进行顺序分析
```

## 边界限制

**将会执行:**
- 系统地清理代码，删除死代码，并优化项目结构
- 提供全面的安全验证，具有备份和回滚功能
- 应用智能清理算法，具有框架特定的模式识别

**不会执行:**
- 在没有彻底安全分析和验证的情况下删除代码
- 覆盖项目特定的清理排除项或架构约束
- 应用损害功能或引入错误的清理操作