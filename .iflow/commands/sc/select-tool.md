---
name: select-tool
description: "基于复杂性评分和操作分析的智能MCP工具选择"
category: special
complexity: high
mcp-servers: [serena, morphllm]
personas: []
---

# /sc:select-tool - 智能MCP工具选择

## 触发条件
- 操作需要在Serena和Morphllm之间进行最佳MCP工具选择
- 元系统决策需要复杂性分析和能力匹配
- 工具路由决策需要权衡性能与准确性
- 操作受益于智能工具能力评估

## 使用方法
```
/sc:select-tool [操作] [--analyze] [--explain]
```

## 行为流程
1. **解析**: 分析操作类型、范围、文件计数和复杂性指标
2. **评分**: 对各种操作因素应用多维复杂性评分
3. **匹配**: 将操作要求与Serena和Morphllm的能力进行比较
4. **选择**: 基于评分矩阵和性能要求选择最佳工具
5. **验证**: 验证选择准确性并提供置信度指标

关键行为：
- 基于文件计数、操作类型、语言和框架要求的复杂性评分
- 评估速度与准确性权衡的性能评估，以实现最佳选择
- 具有直接映射和基于阈值的路由规则的决策逻辑矩阵
- Serena（语义操作）与Morphllm（模式操作）的工具能力匹配

## MCP集成
- **Serena MCP**: 最适合语义操作、LSP功能、符号导航和项目上下文
- **Morphllm MCP**: 最适合基于模式的编辑、批量转换和速度关键操作
- **决策矩阵**: 基于复杂性评分和操作特征的智能路由

## 工具协调
- **get_current_config**: 系统配置分析，用于工具能力评估
- **execute_sketched_edit**: 操作测试和验证，用于选择准确性
- **Read/Grep**: 操作上下文分析和复杂性因素识别
- **Integration**: 重构、编辑、实现和改进命令使用的自动选择逻辑

## 关键模式
- **直接映射**: 符号操作 → Serena，模式编辑 → Morphllm，内存操作 → Serena
- **复杂性阈值**: 评分 >0.6 → Serena，评分 <0.4 → Morphllm，0.4-0.6 → 基于功能
- **性能权衡**: 速度要求 → Morphllm，准确性要求 → Serena
- **回退策略**: Serena → Morphllm → 本机工具降级链

## 示例

### 复杂重构操作
```
/sc:select-tool "跨10个文件重命名函数" --analyze
# 分析：高复杂性（多文件、符号操作）
# 选择：Serena MCP（LSP功能、语义理解）
```

### 基于模式的批量编辑
```
/sc:select-tool "将console.log更新为logger.info，跨项目" --explain
# 分析：基于模式的转换，速度优先
# 选择：Morphllm MCP（模式匹配、批量操作）
```

### 内存管理操作
```
/sc:select-tool "保存项目上下文和发现"
# 直接映射：内存操作 → Serena MCP
# 理由：项目上下文和跨会话持久化
```

## 边界限制

**将会执行:**
- 分析操作并在Serena和Morphllm之间提供最佳工具选择
- 基于文件计数、操作类型和要求应用复杂性评分
- 提供亚100ms的决策时间，选择准确性>95%

**不会执行:**
- 当用户有明确偏好时覆盖明确的工具规范
- 在没有适当复杂性分析和能力匹配的情况下选择工具
- 为方便或速度牺牲性能要求
