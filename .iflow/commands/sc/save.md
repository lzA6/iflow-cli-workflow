---
name: save
description: "通过Serena MCP集成进行会话生命周期管理，用于会话上下文持久化"
category: session
complexity: standard
mcp-servers: [serena]
personas: []
---

# /sc:save - 会话上下文持久化

## 触发条件
- 会话完成和项目上下文持久化需求
- 跨会话内存管理和检查点创建请求
- 项目理解保存和发现归档场景
- 会话生命周期管理和进度跟踪要求

## 使用方法
```
/sc:save [--type session|learnings|context|all] [--summarize] [--checkpoint]
```

## 行为流程
1. **分析**: 检查会话进度并识别值得保留的发现
2. **持久化**: 使用Serena MCP内存管理保存会话上下文和学习内容
3. **检查点**: 为复杂会话和进度跟踪创建恢复点
4. **验证**: 确保会话数据完整性和跨会话兼容性
5. **准备**: 为未来会话的无缝继续准备会话上下文

关键行为：
- Serena MCP集成，用于内存管理和跨会话持久化
- 基于会话进度和关键任务的自动检查点创建
- 具有全面发现和模式归档的会话上下文保存
- 具有累积项目洞察和技术决策的跨会话学习

## MCP集成
- **Serena MCP**: 会话管理、内存操作和跨会话持久化的强制集成
- **内存操作**: 会话上下文存储、检查点创建和发现归档
- **性能关键**: 内存操作<200ms，检查点创建<1s

## 工具协调
- **write_memory/read_memory**: 核心会话上下文持久化和检索
- **think_about_collected_information**: 会话分析和发现识别
- **summarize_changes**: 会话摘要生成和进度文档
- **TodoRead**: 任务完成跟踪，用于自动检查点触发

## 关键模式
- **会话保存**: 发现分析 → 内存持久化 → 检查点创建
- **跨会话学习**: 上下文累积 → 模式归档 → 增强项目理解
- **进度跟踪**: 任务完成 → 自动检查点 → 会话连续性
- **恢复计划**: 状态保存 → 检查点验证 → 恢复就绪

## 示例

### 基本会话保存
```
/sc:save
# 将当前会话发现和上下文保存到Serena MCP
# 如果会话超过30分钟，则自动创建检查点
```

### 全面会话检查点
```
/sc:save --type all --checkpoint
# 完整的会话保存，带有恢复检查点
# 包括所有学习内容、上下文和进度，用于会话恢复
```

### 会话摘要生成
```
/sc:save --summarize
# 创建会话摘要，带有发现文档
# 更新跨会话学习模式和项目洞察
```

### 仅发现持久化
```
/sc:save --type learnings
# 仅保存会话期间发现的新模式和洞察
# 更新项目理解，不进行完整会话保存
```

## 边界限制

**将会执行:**
- 使用Serena MCP集成保存会话上下文，用于跨会话持久化
- 根据会话进度和任务完成情况创建自动检查点
- 保存发现和模式，以增强项目理解

**不会执行:**
- 在没有适当Serena MCP集成和内存访问的情况下操作
- 在没有验证和完整性验证的情况下保存会话数据
- 在没有适当检查点保留的情况下覆盖现有会话上下文