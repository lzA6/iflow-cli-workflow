---
name: load
description: "增强版项目上下文加载 - 基于智能分析的项目激活系统"
category: utility
complexity: enhanced
mcp-servers: [serena]
personas: [project-manager, ai-analyst]
---

# /sc:load - 增强版项目上下文加载

## 触发条件
- 会话初始化和项目上下文加载请求
- 跨会话持久化和内存检索需求
- 项目激活和上下文管理要求
- 会话生命周期管理和检查点加载场景
- **新增**: 基于智能分析的项目深度理解需求
- **新增**: 项目结构变化和优化建议需求
- **新增**: 历史决策记录和上下文恢复需求

## 使用方法

### 🚀 基础使用（推荐）
```bash
# 运行增强版项目上下文加载
python .iflow/commands/sc/load_enhanced_launcher.py

# 或直接运行主程序
python .iflow/commands/sc/load_enhanced_main.py
```

### 🔧 高级选项
```bash
# 指定项目路径
python .iflow/commands/sc/load_enhanced_main.py --project-root /path/to/project

# 加载特定类型的上下文
python .iflow/commands/sc/load_enhanced_main.py --type project
python .iflow/commands/sc/load_enhanced_main.py --type config
python .iflow/commands/sc/load_enhanced_main.py --type deps
python .iflow/commands/sc/load_enhanced_main.py --type checkpoint

# 刷新和分析选项
python .iflow/commands/sc/load_enhanced_main.py --refresh
python .iflow/commands/sc/load_enhanced_main.py --analyze
python .iflow/commands/sc/load_enhanced_main.py --deep-analysis

# 指定检查点
python .iflow/commands/sc/load_enhanced_main.py --checkpoint session_123
```

## 🚀 增强版行为流程

### 十大核心步骤
1. **AI信息强制传递** - 确保AI完全理解项目状态和加载要求
2. **项目结构深度分析** - 深度分析项目结构和组件关系
3. **Serena MCP集成** - 建立内存管理和跨会话持久化连接
4. **历史上下文检索** - 检索项目记忆、检查点和历史决策
5. **项目激活建立** - 基于分析结果建立完整项目上下文
6. **智能上下文验证** - 验证加载上下文的完整性和一致性
7. **变化检测分析** - 对比当前状态与历史记录的变化
8. **决策记录恢复** - 恢复相关的决策记录和推理过程
9. **优化建议生成** - 基于当前状态生成优化建议
10. **会话就绪确认** - 确保所有组件就绪并提供状态报告

### 🔍 核心增强特性
- **智能项目理解**: 基于功能特点分析的深度项目理解
- **历史决策恢复**: 完整的决策记录和推理链恢复
- **变化影响评估**: 项目结构变化的影响分析
- **优化建议集成**: 基于当前状态的智能优化建议
- **上下文连续性**: 确保跨会话的上下文一致性

## 🤖 AI集成增强

### 项目理解AI系统
- **结构分析AI**: 深度理解项目架构和组件关系
- **功能识别AI**: 自动识别每个模块的功能特点和价值
- **决策回顾AI**: 分析历史决策并提供上下文建议
- **优化建议AI**: 基于当前状态生成智能优化建议

### 记忆管理AI增强
- **Serena MCP集成**: 深度集成内存管理和持久化
- **决策记录管理**: 智能决策记录的存储和检索
- **上下文连续性**: 确保跨会话的上下文连贯性
- **学习积累**: 基于历史记录的持续学习和改进

## 🛠️ 工具协调增强

### 核心加载工具
- **AI信息强制传递器**: 确保AI理解项目加载状态
- **项目结构分析器**: 深度项目结构和组件分析
- **功能分析模块**: 每个模块的功能特点分析
- **完整依据系统**: 历史决策记录的恢复和管理
- **优化报告生成器**: 基于加载状态的优化建议
- **上下文验证器**: 上下文完整性和一致性验证

### Serena MCP集成工具
- **activate_project**: 增强版项目激活和上下文建立
- **list_memories/read_memory**: 智能内存检索和上下文加载
- **create_checkpoint**: 智能检查点创建和管理
- **context_manager**: 跨会话上下文管理和协调

## 🎯 关键模式增强

### 🔄 智能项目激活模式
- **深度结构分析**: 全面的项目结构和组件分析
- **功能特点识别**: 每个模块的功能和价值评估
- **历史记录检索**: 相关历史决策和推理过程恢复
- **上下文建立**: 基于分析的完整项目上下文建立

### 🔍 变化检测分析模式
- **结构变化对比**: 当前与历史状态的深度对比
- **影响评估**: 变化对项目的影响分析
- **风险评估**: 变化带来的风险等级评估
- **优化建议**: 基于变化的智能优化建议

### 🧠 记忆管理增强模式
- **智能记忆检索**: 基于相关性的记忆内容检索
- **上下文连续性**: 确保跨会话的上下文连贯性
- **决策记录恢复**: 完整决策记录和推理链恢复
- **学习积累**: 基于历史记录的持续学习

## 📊 示例使用场景

### 🚀 完整项目加载（推荐）
```bash
python .iflow/commands/sc/load_enhanced_launcher.py
# 执行完整的10步加载流程
# 建立智能项目上下文
# 支持交互式深入探索
```

### 🔍 深度分析加载
```bash
python .iflow/commands/sc/load_enhanced_main.py --deep-analysis
# 执行深度项目结构分析
# 生成详细的功能特点报告
# 建立完整的项目理解
```

### 🔄 检查点恢复
```bash
python .iflow/commands/sc/load_enhanced_main.py --type checkpoint --checkpoint session_123
# 恢复特定检查点
# 恢复相关决策记录
# 验证上下文完整性
```

### 📈 变化分析加载
```bash
python .iflow/commands/sc/load_enhanced_main.py --refresh --analyze
# 检测项目结构变化
# 分析变化影响
# 生成优化建议
```

### 🎯 特定组件加载
```bash
python .iflow/commands/sc/load_enhanced_main.py --type deps --refresh
# 专注于依赖关系分析
# 更新依赖映射
# 生成依赖优化建议
```

## 📄 输出报告

### 🗂️ 报告类型
1. **项目上下文报告** - 完整的项目理解和分析报告
2. **结构分析报告** - 深度项目结构和组件关系分析
3. **变化检测报告** - 项目变化和影响评估报告
4. **决策记录报告** - 历史决策和推理过程恢复报告
5. **优化建议报告** - 基于当前状态的智能优化建议
6. **会话状态报告** - 会话就绪性和组件状态报告

### 📁 报告位置
- **主报告目录**: `reports/`
- **AI上下文**: `.iflow/temp_docs/ai_context/`
- **决策记录**: `.iflow/temp_docs/decisions/`
- **检查点**: `.iflow/temp_docs/checkpoints/`
- **项目快照**: `.iflow/cache/project_snapshots/`

## ⚡ 边界限制

### ✅ 将会执行
- 使用Serena MCP集成加载项目上下文，用于内存管理
- 提供具有跨会话持久化的会话生命周期管理
- 通过全面上下文加载建立项目激活
- **新增**: 基于智能分析的项目深度理解
- **新增**: 历史决策记录和推理过程恢复
- **新增**: 项目结构变化检测和影响分析
- **新增**: 基于当前状态的智能优化建议

### ❌ 不会执行
- 未经明确许可修改项目结构或配置
- 在没有适当Serena MCP集成和验证的情况下加载上下文
- 在没有检查点保留的情况下覆盖现有会话上下文
- **新增**: 不会删除任何文件，只提供删除建议和依据
- **新增**: 不会强制执行优化建议，只提供决策支持

## 🎯 核心优势

1. **智能项目理解** - 基于功能特点分析的深度项目理解
2. **历史决策恢复** - 完整的决策记录和推理链恢复
3. **变化影响评估** - 项目结构变化的影响分析
4. **优化建议集成** - 基于当前状态的智能优化建议
5. **上下文连续性** - 确保跨会话的上下文一致性
6. **交互式探索** - 支持用户深入分析每个加载细节
7. **多维度报告** - JSON和Markdown格式的完整报告
8. **学习积累** - 基于历史记录的持续学习和改进

## 🔄 与增强版 /sc:test 的集成

加载指令与测试指令深度集成：

### 联动关系
- **加载指令** → 建立项目上下文
- **测试指令** → 基于上下文执行测试
- **优化建议** → 指导测试改进方向

### 数据共享
- **项目结构分析** → 测试目标识别
- **功能特点分析** → 测试重点确定
- **决策记录** → 测试策略制定

### 工作流协同
1. **加载阶段**: 建立完整项目理解
2. **测试阶段**: 基于理解执行精准测试
3. **优化阶段**: 基于测试结果优化项目

---

*增强版 /sc:load - 让项目上下文加载更智能、更全面、更连贯*