---
name: test
description: "执行测试并进行分析和自动化质量报告"
category: utility
complexity: enhanced
mcp-servers: [playwright]
personas: [qa-specialist]
---

# /sc:test - 测试和质量保证

## 触发条件
- 单元测试、集成测试或端到端测试的执行请求
- 覆盖率分析和质量门控验证需求
- 连续测试和监视模式场景
- 测试失败分析和调试需求

## 使用方法
```
/sc:test [目标] [--type unit|integration|e2e|all] [--coverage] [--watch] [--fix]
```

## 行为流程
1. **发现**: 使用运行器模式和约定对可用测试进行分类
2. **配置**: 设置适当的测试环境和执行参数
3. **执行**: 运行测试并监控和实时进度跟踪
4. **分析**: 生成覆盖率报告和失败诊断
5. **报告**: 提供可操作的建议和质量指标

关键行为：
- 自动检测测试框架和配置
- 生成具有指标的综合覆盖率报告
- 激活Playwright MCP进行端到端浏览器测试
- 提供智能测试失败分析
- 支持开发连续监视模式

## MCP集成
- **Playwright MCP**: 为`--type e2e`浏览器测试自动激活
- **QA专家角色**: 激活用于测试分析和质量评估
- **增强功能**: 跨浏览器测试、视觉验证、性能指标

## 工具协调
- **Bash**: 测试运行器执行和环境管理
- **Glob**: 测试发现和文件模式匹配
- **Grep**: 结果解析和失败分析
- **Write**: 覆盖率报告和测试摘要

## 关键模式
- **测试发现**: 基于模式的分类 → 适当的运行器选择
- **覆盖率分析**: 执行指标 → 综合覆盖率报告
- **端到端测试**: 浏览器自动化 → 跨平台验证
- **监视模式**: 文件监控 → 连续测试执行

## 示例

### 基础测试执行
```
/sc:test
# 发现并使用标准配置运行所有测试
# 生成通过/失败摘要和基本覆盖率
```

### 目标覆盖率分析
```
/sc:test src/components --type unit --coverage
# 特定目录的单元测试，具有详细覆盖率指标
```

### 浏览器测试
```
/sc:test --type e2e
# 激活Playwright MCP进行综合浏览器测试
# 跨浏览器兼容性和视觉验证
```

### 开发监视模式
```
/sc:test --watch --fix
# 具有自动简单失败修复的连续测试
# 开发期间实时反馈
```

## 边界限制

**将会执行:**
- 使用项目配置的测试运行器执行现有测试套件
- 生成覆盖率报告和质量指标
- 提供具有可操作建议的智能测试失败分析

**不会执行:**
- 生成测试用例或修改测试框架配置
- 在没有适当设置的情况下执行需要外部服务的测试
- 未经明确许可对测试文件进行破坏性更改